<!DOCTYPE html>
<html lang="zh-CN" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>员工人事管理系统</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- 分离出来的自定义CSS -->
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/style-employee.css">
    <link rel="stylesheet" href="/css/style-department.css">

</head>
<body>
<!-- 顶部导航栏 -->
<div class="header">
    <div class="logo">员工人事管理系统</div>
    <div class="user-info">
        <span class="me-3" id="welcome">欢迎，管理员</span>
        <div class="dropdown">
            <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fas fa-user"></i>
            </button>
            <ul class="dropdown-menu dropdown-menu-end" id="userDropdown" aria-labelledby="dropdownMenuButton">
                <li><a class="dropdown-item" href="#" data-action="settings"><i class="fas fa-cog me-2"></i>设置</a></li>
                <li><a class="dropdown-item" href="login.html" data-action="logout"><i class="fas fa-sign-out-alt me-2"></i>退出</a></li>
            </ul>
        </div>
    </div>
</div>

<!-- 侧边栏 -->
<div class="sidebar">
    <ul class="sidebar-menu">
        <li><a href="#" class="active" data-page="employee-management"><i class="fas fa-users"></i> <span class="menu-text">员工管理</span></a></li>
        <li><a href="#" data-page="department"><i class="fas fa-chart-line"></i> <span class="menu-text">部门统计</span></a></li>
        <li><a href="#"><i class="fas fa-clipboard"></i> <span class="menu-text">留言墙</span></a></li>
    </ul>
</div>

<!-- 内容区域 -->
<div class="main-content">
    <!-- 员工管理页面 -->
    <div id="employee-management" class="page-content">
        <div class="page-title">
            <h3>员工管理</h3>
        </div>

        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <span>员工列表</span>
                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addEmployeeModal">
                    <i class="fas fa-plus"></i> 添加员工
                </button>
            </div>
            <div class="card-body">
                <div class="d-flex justify-content-between mb-3">
                    <div class="d-flex">
                        <input type="text" id="searchInput" class="form-control form-control-sm me-2" placeholder="搜索员工..." style="width: 200px;">
                        <button class="btn btn-outline-secondary btn-sm" id="searchButton">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    <button class="btn btn-outline-secondary btn-sm" id="refreshButton">
                        <i class="fas fa-sync-alt"></i> 刷新
                    </button>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>姓名</th>
                            <th>年龄</th>
                            <th>部门</th>
                            <th>岗位</th>
                            <th>加入日期</th>
                            <th>操作</th>
                        </tr>
                        </thead>
                        <tbody id="employeeTableBody">
                        <tr>
                            <td colspan="7" class="text-center">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">加载中...</span>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <nav aria-label="Page navigation">
                    <ul class="pagination justify-content-end" id="pagination">
                        <!-- 分页将由JavaScript生成 -->
                    </ul>
                </nav>
            </div>
        </div>
    </div>

    <!-- 部门信息页面 -->
    <div id="department" class="page-content" style="display: none;">
        <div class="page-title">
            <h3>部门信息</h3>
        </div>

        <div class="row" id="departmentCards">
            <!-- 部门卡片将由JavaScript生成 -->
        </div>

        <div class="card mt-4">
            <div class="card-header">部门员工分布</div>
            <div class="card-body">
                <canvas id="departmentChart" height="100"></canvas>
            </div>
        </div>
    </div>

    <!-- 留言墙页面 -->
    <div id="comments" class="page-content" style="display: none;">
        <div class="page-title">
            <h3>留言墙</h3>
        </div>

    </div>

</div>

<!-- 添加员工模态框 - 优化版 -->
<div class="modal fade" id="addEmployeeModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content border-0 shadow-lg">
            <!-- 模态框头部 -->
            <div class="modal-header bg-gradient-primary text-white border-0">
                <div class="d-flex align-items-center w-100">
                    <div class="flex-grow-1">
                        <h5 class="modal-title mb-0">
                            <i class="fas fa-user-plus me-2"></i>
                            添加新员工
                        </h5>
                        <small class="text-white-50 d-block mt-1">请填写员工基本信息</small>
                    </div>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="关闭"></button>
                </div>
            </div>

            <div class="modal-body p-4">
                <form id="addEmployeeForm" class="row g-3">
                    <!-- 第一行：姓名、年龄、性别 -->
                    <div class="col-md-4">
                        <label for="empName" class="form-label fw-semibold">
                            <i class="fas fa-user me-1 text-primary"></i>
                            姓名
                            <span class="text-danger">*</span>
                        </label>
                        <div class="input-group">
                            <span class="input-group-text bg-light border-end-0">
                                <i class="fas fa-user text-muted"></i>
                            </span>
                            <input type="text" class="form-control border-start-0" id="empName"
                                   placeholder="请输入员工姓名" required>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <label for="empAge" class="form-label fw-semibold">
                            <i class="fas fa-birthday-cake me-1 text-primary"></i>
                            年龄
                            <span class="text-danger">*</span>
                        </label>
                        <div class="input-group">
                            <span class="input-group-text bg-light border-end-0">
                                <i class="fas fa-calendar-alt text-muted"></i>
                            </span>
                            <input type="number" class="form-control border-start-0" id="empAge"
                                   placeholder="18-65" min="18" max="65" required>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <label for="empGender" class="form-label fw-semibold">
                            <i class="fas fa-venus-mars me-1 text-primary"></i>
                            性别
                            <span class="text-danger">*</span>
                        </label>
                        <div class="input-group">
                            <span class="input-group-text bg-light border-end-0">
                                <i class="fas fa-user-friends text-muted"></i>
                            </span>
                            <select class="form-select border-start-0" id="empGender" required>
                                <option value="">请选择性别</option>
                                <option value="男">男</option>
                                <option value="女">女</option>
                                <option value="未知">未知</option>
                            </select>
                        </div>
                    </div>

                    <!-- 第二行：部门、岗位 -->
                    <div class="col-md-6">
                        <label for="empDept" class="form-label fw-semibold">
                            <i class="fas fa-building me-1 text-primary"></i>
                            部门
                            <span class="text-danger">*</span>
                        </label>
                        <div class="input-group">
                            <span class="input-group-text bg-light border-end-0">
                                <i class="fas fa-sitemap text-muted"></i>
                            </span>
                            <select class="form-select border-start-0" id="empDept" required>
                                <option value="">请选择部门</option>
                                <!-- 部门选项将由JavaScript生成 -->
                            </select>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <label for="empPosition" class="form-label fw-semibold">
                            <i class="fas fa-user-tie me-1 text-primary"></i>
                            岗位
                            <span class="text-danger">*</span>
                        </label>
                        <div class="input-group">
                            <span class="input-group-text bg-light border-end-0">
                                <i class="fas fa-briefcase text-muted"></i>
                            </span>
                            <select class="form-select border-start-0" id="empPosition" required>
                                <option value="">请选择岗位</option>
                                <option value="实习生">实习生</option>
                                <option value="普通职工">普通职工</option>
                                <option value="负责人">负责人</option>
                                <option value="经理">经理</option>
                                <option value="高级经理">高级经理</option>
                            </select>
                        </div>
                    </div>

                    <!-- 第三行：薪资、电话 -->
                    <div class="col-md-6">
                        <label for="empSalary" class="form-label fw-semibold">
                            <i class="fas fa-money-bill-wave me-1 text-primary"></i>
                            基本工资
                            <span class="text-danger">*</span>
                        </label>
                        <div class="input-group">
                            <span class="input-group-text bg-light border-end-0">
                                ¥
                            </span>
                            <input type="number" class="form-control border-start-0" id="empSalary"
                                   placeholder="3000-50000" min="3000" max="50000" step="100" required>
                            <span class="input-group-text">.00</span>
                        </div>
                        <small class="text-muted">薪资范围：3,000 - 50,000元</small>
                    </div>

                    <div class="col-md-6">
                        <label for="empPhone" class="form-label fw-semibold">
                            <i class="fas fa-phone me-1 text-primary"></i>
                            电话
                            <span class="text-danger">*</span>
                        </label>
                        <div class="input-group">
                            <span class="input-group-text bg-light border-end-0">
                                <i class="fas fa-mobile-alt text-muted"></i>
                            </span>
                            <input type="tel" class="form-control border-start-0" id="empPhone"
                                   placeholder="11位手机号码" pattern="[0-9]{11}" required>
                        </div>
                    </div>

                    <!-- 第四行：邮箱 -->
                    <div class="col-md-12">
                        <label for="empEmail" class="form-label fw-semibold">
                            <i class="fas fa-envelope me-1 text-primary"></i>
                            邮箱
                            <span class="text-danger">*</span>
                        </label>
                        <div class="input-group">
                            <span class="input-group-text bg-light border-end-0">
                                <i class="fas fa-at text-muted"></i>
                            </span>
                            <input type="email" class="form-control border-start-0" id="empEmail"
                                   placeholder="example@company.com" required>
                        </div>
                    </div>

                    <!-- 第五行：住址 -->
                    <div class="col-md-12">
                        <label for="empAddress" class="form-label fw-semibold">
                            <i class="fas fa-home me-1 text-primary"></i>
                            住址
                        </label>
                        <div class="input-group">
                            <span class="input-group-text bg-light border-end-0 align-items-start pt-3">
                                <i class="fas fa-map-marker-alt text-muted"></i>
                            </span>
                            <textarea class="form-control border-start-0" id="empAddress"
                                      rows="2" placeholder="请输入详细住址（选填）"></textarea>
                        </div>
                    </div>

                    <!-- 入职日期 -->
                    <div class="col-md-6">
                        <label for="empJoinDate" class="form-label fw-semibold">
                            <i class="fas fa-calendar-alt me-1 text-primary"></i>
                            入职日期
                        </label>
                        <div class="input-group">
                            <span class="input-group-text bg-light border-end-0">
                                <i class="fas fa-calendar text-muted"></i>
                            </span>
                            <input type="date" class="form-control border-start-0" id="empJoinDate">
                        </div>
                    </div>
                </form>
            </div>

            <!-- 模态框底部 -->
            <div class="modal-footer border-top bg-light">
                <button type="button" class="btn btn-outline-secondary px-4" data-bs-dismiss="modal">
                    <i class="fas fa-times me-2"></i>取消
                </button>
                <button type="button" class="btn btn-primary px-4" id="saveEmployee">
                    <span class="spinner-border spinner-border-sm me-2"
                          id="saveSpinner"
                          role="status"
                          aria-hidden="true"
                          style="display: none;"></span>
                    <i class="fas fa-save me-2"></i>保存员工
                </button>
            </div>
        </div>
    </div>
</div>

<!-- 编辑员工模态框 - 完整版 -->
<div class="modal fade" id="editEmployeeModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <!-- 模态框头部 -->
            <div class="modal-header bg-light">
                <div class="d-flex align-items-center w-100">
                    <div class="flex-grow-1">
                        <h5 class="modal-title mb-0">
                            <i class="fas fa-user-edit me-2 text-primary"></i>
                            编辑员工信息
                        </h5>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="关闭"></button>
                </div>
            </div>

            <div class="modal-body p-4">
                <form id="editEmployeeForm">
                    <input type="hidden" id="editEmpId">

                    <!-- 头像编辑区域 -->
                    <div class="card mb-4 border-0 shadow-sm">
                        <div class="card-header bg-white border-bottom">
                            <h6 class="mb-0"><i class="fas fa-camera me-2 text-info"></i>员工头像</h6>
                        </div>
                        <div class="card-body">
                            <div class="row align-items-center">
                                <!-- 头像预览 -->
                                <div class="col-md-3 text-center mb-3 mb-md-0">
                                    <div class="avatar-container position-relative">
                                        <img id="editEmpAvatarPreview"
                                             src="/images/default-avatar.png"
                                             class="img-fluid rounded-circle border avatar-preview"
                                             alt="头像预览"
                                             style="width: 120px; height: 120px; object-fit: cover;">
                                        <div class="avatar-overlay rounded-circle">
                                            <i class="fas fa-camera"></i>
                                        </div>
                                    </div>
                                    <small class="text-muted d-block mt-2">点击头像可更换</small>
                                </div>

                                <!-- 头像控制区域 -->
                                <div class="col-md-9">
                                    <div class="row g-3">
                                        <!-- 头像上传 -->
                                        <div class="col-12">
                                            <label class="form-label small text-muted mb-2">上传新头像</label>
                                            <div class="input-group">
                                                <input type="file"
                                                       class="form-control"
                                                       id="editEmpAvatarFile"
                                                       accept="image/*"
                                                       style="display: none;">
                                                <button type="button"
                                                        class="btn btn-outline-primary flex-grow-1"
                                                        onclick="document.getElementById('editEmpAvatarFile').click()">
                                                    <i class="fas fa-upload me-2"></i>选择图片
                                                </button>
                                            </div>
                                            <div class="mt-2" id="avatarFileInfo"></div>
                                        </div>

                                        <!-- 头像URL（可选） -->
                                        <div class="col-12">
                                            <label class="form-label small text-muted mb-2">或输入头像URL</label>
                                            <div class="input-group">
                                                <input type="url"
                                                       class="form-control"
                                                       id="editEmpAvatarUrl"
                                                       placeholder="/images/placeholder.png">
                                                <button type="button"
                                                        class="btn btn-outline-secondary"
                                                        onclick="previewAvatarFromUrl()">
                                                    预览
                                                </button>
                                            </div>
                                        </div>

                                        <!-- 头像操作按钮 -->
                                        <div class="col-12 mt-3">
                                            <div class="d-flex gap-2">
                                                <button type="button"
                                                        class="btn btn-outline-success btn-sm"
                                                        onclick="downloadAvatar()">
                                                    <i class="fas fa-download me-1"></i>下载头像
                                                </button>
                                                <button type="button"
                                                        class="btn btn-outline-warning btn-sm"
                                                        onclick="resetAvatar()">
                                                    <i class="fas fa-undo me-1"></i>恢复默认
                                                </button>
                                                <button type="button"
                                                        class="btn btn-outline-danger btn-sm"
                                                        onclick="clearAvatar()">
                                                    <i class="fas fa-trash me-1"></i>清除头像
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 基本信息 -->
                    <div class="card mb-4 border-0 shadow-sm">
                        <div class="card-header bg-white border-bottom">
                            <h6 class="mb-0"><i class="fas fa-id-card me-2 text-primary"></i>基本信息</h6>
                        </div>
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="editEmpName" class="form-label">
                                        <i class="fas fa-user me-1 text-secondary"></i>姓名
                                        <span class="text-danger">*</span>
                                    </label>
                                    <input type="text" class="form-control" id="editEmpName" required>
                                </div>

                                <div class="col-md-6">
                                    <label for="editEmpAge" class="form-label">
                                        <i class="fas fa-birthday-cake me-1 text-secondary"></i>年龄
                                        <span class="text-danger">*</span>
                                    </label>
                                    <input type="number" class="form-control" id="editEmpAge" min="18" max="65" required>
                                </div>

                                <div class="col-md-6">
                                    <label for="editEmpGender" class="form-label">
                                        <i class="fas fa-venus-mars me-1 text-secondary"></i>性别
                                        <span class="text-danger">*</span>
                                    </label>
                                    <select class="form-select" id="editEmpGender" required>
                                        <option value="男">男</option>
                                        <option value="女">女</option>
                                        <option value="未知">未知</option>
                                    </select>
                                </div>

                                <div class="col-md-6">
                                    <label for="editEmpDept" class="form-label">
                                        <i class="fas fa-building me-1 text-secondary"></i>部门
                                        <span class="text-danger">*</span>
                                    </label>
                                    <select class="form-select" id="editEmpDept" required>
                                        <!-- 部门选项将由JavaScript生成 -->
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 职位与薪资 -->
                    <div class="card mb-4 border-0 shadow-sm">
                        <div class="card-header bg-white border-bottom">
                            <h6 class="mb-0"><i class="fas fa-briefcase me-2 text-success"></i>职位与薪资</h6>
                        </div>
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="editEmpPosition" class="form-label">
                                        <i class="fas fa-user-tie me-1 text-secondary"></i>职位
                                        <span class="text-danger">*</span>
                                    </label>
                                    <select class="form-select" id="editEmpPosition" required>
                                        <option value="实习生">实习生</option>
                                        <option value="普通职工">普通职工</option>
                                        <option value="负责人">负责人</option>
                                        <option value="经理">经理</option>
                                        <option value="高级经理">高级经理</option>
                                    </select>
                                </div>

                                <div class="col-md-6">
                                    <label for="editEmpPerformance" class="form-label">
                                        <i class="fas fa-chart-line me-1 text-secondary"></i>绩效等级
                                        <span class="text-danger">*</span>
                                    </label>
                                    <select class="form-select" id="editEmpPerformance" required>
                                        <option value="A">A（优秀）</option>
                                        <option value="B">B（良好）</option>
                                        <option value="C">C（一般）</option>
                                        <option value="D">D（待改进）</option>
                                        <option value="E">E（不合格）</option>
                                    </select>
                                </div>

                                <div class="col-md-12">
                                    <label for="editEmpSalary" class="form-label">
                                        <i class="fas fa-money-bill-wave me-1 text-secondary"></i>基本工资（元）
                                        <span class="text-danger">*</span>
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text">¥</span>
                                        <input type="number" class="form-control" id="editEmpSalary" min="0" step="100" required>
                                        <span class="input-group-text">.00</span>
                                    </div>
                                    <div class="form-text">
                                        薪资范围：3,000 - 50,000元
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 联系方式 -->
                    <div class="card border-0 shadow-sm">
                        <div class="card-header bg-white border-bottom">
                            <h6 class="mb-0"><i class="fas fa-address-book me-2 text-info"></i>联系方式</h6>
                        </div>
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="editEmpPhone" class="form-label">
                                        <i class="fas fa-phone me-1 text-secondary"></i>电话
                                        <span class="text-danger">*</span>
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text">
                                            <i class="fas fa-mobile-alt"></i>
                                        </span>
                                        <input type="tel" class="form-control" id="editEmpPhone" required
                                               pattern="[0-9]{11}" placeholder="13800138000">
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <label for="editEmpEmail" class="form-label">
                                        <i class="fas fa-envelope me-1 text-secondary"></i>邮箱
                                        <span class="text-danger">*</span>
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text">@</span>
                                        <input type="email" class="form-control" id="editEmpEmail" required>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <label for="editEmpAddress" class="form-label">
                                        <i class="fas fa-home me-1 text-secondary"></i>住址
                                    </label>
                                    <textarea class="form-control" id="editEmpAddress" rows="2"
                                              placeholder="请输入详细地址"></textarea>
                                </div>

                                <!-- 入职时间 -->
                                <div class="col-md-12">
                                    <label for="editEmpJoinDate" class="form-label">
                                        <i class="fas fa-calendar-alt me-1 text-secondary"></i>入职时间
                                    </label>
                                    <input type="date" class="form-control" id="editEmpJoinDate">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <div class="modal-footer border-top-0 bg-light">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-1"></i>取消
                </button>
                <button type="button" class="btn btn-primary" id="updateEmployee">
                    <span class="spinner-border spinner-border-sm me-1"
                          id="updateSpinner"
                          role="status"
                          aria-hidden="true"
                          style="display: none;"></span>
                    <i class="fas fa-save me-1"></i>保存更改
                </button>
            </div>
        </div>
    </div>
</div>

<!-- 头像预览大图模态框 -->
<div class="modal fade" id="avatarPreviewModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title">头像预览</h6>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body text-center">
                <img id="largeAvatarPreview" src="" class="img-fluid rounded-circle"
                     style="width: 200px; height: 200px; object-fit: cover;">
            </div>
            <div class="modal-footer justify-content-center">
                <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal">
                    关闭预览
                </button>
            </div>
        </div>
    </div>
</div>

<!-- 员工详情模态框 - 优化版 -->
<div class="modal fade" id="employeeDetailModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <!-- 头部 -->
            <div class="modal-header bg-light">
                <div class="d-flex align-items-center w-100">
                    <div class="me-3">
                        <img id="detail-avatar" src="/images/default-avatar.png" class="img-fluid rounded-circle border"
                             alt="员工照片" style="width: 60px; height: 60px; object-fit: cover;">
                    </div>
                    <div class="flex-grow-1">
                        <h5 class="modal-title mb-1 text-dark" id="detail-name">张三</h5>
                        <div class="d-flex flex-wrap align-items-center">
                            <span class="badge bg-primary me-2" id="detail-position">Java开发工程师</span>
                            <span class="badge bg-secondary" id="detail-dept">技术部</span>
                        </div>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="关闭"></button>
                </div>
            </div>

            <div class="modal-body p-4">
                <!-- 基本信息卡片 -->
                <div class="card mb-4 border-0 shadow-sm">
                    <div class="card-header bg-white border-bottom">
                        <h6 class="mb-0"><i class="fas fa-id-card me-2 text-primary"></i>基本信息</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="small text-muted mb-1">员工ID</label>
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-hashtag text-secondary me-2"></i>
                                    <span id="detail-id" class="fw-semibold">1001</span>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="small text-muted mb-1">年龄</label>
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-birthday-cake text-secondary me-2"></i>
                                    <span id="detail-age" class="fw-semibold">32</span> 岁
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="small text-muted mb-1">性别</label>
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-user text-secondary me-2"></i>
                                    <span id="detail-gender" class="fw-semibold">男</span>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="small text-muted mb-1">加入日期</label>
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-calendar-alt text-secondary me-2"></i>
                                    <span id="detail-joinDate" class="fw-semibold">24</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 薪资绩效卡片 -->
                <div class="card mb-4 border-0 shadow-sm">
                    <div class="card-header bg-white border-bottom">
                        <h6 class="mb-0"><i class="fas fa-chart-line me-2 text-success"></i>薪资绩效</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="small text-muted mb-1">基本工资</label>
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-money-bill-wave text-success me-2"></i>
                                    <span class="fw-bold text-success">¥<span id="detail-salary">15000</span></span>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="small text-muted mb-1">绩效等级</label>
                                <div>
                                    <span id="detail-performance" class="badge bg-warning text-dark p-2">
                                        <i class="fas fa-star me-1"></i>A级
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 联系方式卡片 -->
                <div class="card border-0 shadow-sm">
                    <div class="card-header bg-white border-bottom">
                        <h6 class="mb-0"><i class="fas fa-address-book me-2 text-info"></i>联系方式</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="small text-muted mb-1">电话</label>
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-phone text-info me-2"></i>
                                    <span id="detail-phone" class="fw-semibold">13800138000</span>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="small text-muted mb-1">邮箱</label>
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-envelope text-info me-2"></i>
                                    <span id="detail-email" class="fw-semibold text-break">zhangsan@example.com</span>
                                </div>
                            </div>
                            <div class="col-12">
                                <label class="small text-muted mb-1">住址</label>
                                <div class="d-flex">
                                    <i class="fas fa-home text-info me-2 mt-1"></i>
                                    <span id="detail-address" class="fw-semibold flex-grow-1">
                                        北京市海淀区中关村大街1号
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer border-top-0">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-1"></i>关闭
                </button>
            </div>
        </div>
    </div>
</div>

<!-- 消息提示容器 -->
<div class="toast-container"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="/js/index.js"></script>
<script src="/js/employee-modify.js"></script>

<script>
    // API基础URL - 根据您的后端API地址进行修改
    const API_BASE_URL = 'http://localhost:8080/api';

    // 全局状态
    let currentPage = 1;
    let totalPages = 1;
    let currentSearchTerm = '';

    document.addEventListener('DOMContentLoaded', function() {
        // 初始化页面
        initPage();

        // 菜单切换
        const menuItems = document.querySelectorAll('.sidebar-menu a');
        const pageContents = document.querySelectorAll('.page-content');

        menuItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();

                // 更新菜单激活状态
                menuItems.forEach(i => i.classList.remove('active'));
                this.classList.add('active');

                // 显示对应页面
                const pageId = this.getAttribute('data-page');
                pageContents.forEach(page => {
                    page.style.display = 'none';
                });

                if (pageId) {
                    document.getElementById(pageId).style.display = 'block';

                    // 如果是部门页面，加载部门数据
                    if (pageId === 'department') {
                        loadDepartmentData();
                    }
                }
            });
        });

        // 搜索按钮点击
        document.getElementById('searchButton').addEventListener('click', function() {
            currentSearchTerm = document.getElementById('searchInput').value;
            currentPage = 1;
            loadEmployees();
        });

        // 刷新按钮点击
        document.getElementById('refreshButton').addEventListener('click', function() {
            currentSearchTerm = '';
            document.getElementById('searchInput').value = '';
            currentPage = 1;
            loadEmployees();
        });

        // 保存新员工
        document.getElementById('saveEmployee').addEventListener('click', function() {
            addEmployee();
        });

        // 更新员工信息
        document.getElementById('updateEmployee').addEventListener('click', function() {
            updateEmployee();
        });
    });

    // 初始化页面
    async function initPage() {
        const params = new URLSearchParams(window.location.search);
        document.getElementById("welcome").textContent = "欢迎，" + params.get("username") || localStorage.getItem("username");
        await loadEmployees();
        await loadDepartmentsForSelect();
    }

    /**
     * 获取指定 Cookie 的值
     * @param {string} name - Cookie 名称
     * @returns {string|null} Cookie 值或 null
     */
    function getCookie(name) {
        // 1. 获取所有 Cookie
        const cookies = document.cookie;

        // 2. 按分号和空格分割成数组
        const cookieArray = cookies.split('; ');

        // 3. 遍历查找指定名称的 Cookie
        for (let i = 0; i < cookieArray.length; i++) {
            const cookie = cookieArray[i];
            // 分割名称和值
            const [cookieName, cookieValue] = cookie.split('=');

            // 解码名称（处理编码的字符）
            const decodedName = decodeURIComponent(cookieName);

            if (decodedName === name) {
                // 解码值并返回
                return decodeURIComponent(cookieValue);
            }
        }

        // 4. 未找到返回 null
        return null;
    }

    // 加载员工数据
    async function loadEmployees() {
        try {
            showLoading('#employeeTableBody');

            // 构建查询参数
            const params = new URLSearchParams({
                page: currentPage,
                limit: 10
            });

            if (currentSearchTerm) {
                params.append('search', currentSearchTerm);
            }

            const response = await fetch(`${API_BASE_URL}/employees?${params}`);

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();

            // 更新分页信息
            currentPage = data.page + 1;
            totalPages = data.totalPages;

            // 渲染员工表格
            renderEmployeeTable(data.employees);

            // 渲染分页控件
            renderPagination();

        } catch (error) {
            console.error('加载员工数据失败:', error);
            showError('加载员工数据失败，请稍后重试');
        }
    }

    // 渲染员工表格
    function renderEmployeeTable(employees) {
        const tbody = document.getElementById('employeeTableBody');

        if (employees.length === 0) {
            tbody.innerHTML = `
                    <tr>
                        <td colspan="7" class="text-center">没有找到员工数据</td>
                    </tr>
                `;
            return;
        }

        tbody.innerHTML = employees.map(emp => `
                <tr>
                    <td>${emp.id}</td>
                    <td>${emp.name}</td>
                    <td>${emp.age}</td>
                    <td>${emp.department}</td>
                    <td>${convertPosition(emp.position)}</td>
                    <td>${emp.join_date}</td>
                    <td>
                        <button class="btn btn-info btn-action btn-detail" data-id="${emp.id}">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="btn btn-warning btn-action btn-edit" data-id="${emp.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-danger btn-action btn-delete" data-id="${emp.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            `).join('');

        // 添加事件监听器
        addTableEventListeners();
    }

    // 添加表格事件监听器
    function addTableEventListeners() {
        // 员工详情按钮点击
        const detailButtons = document.querySelectorAll('.btn-detail');
        detailButtons.forEach(button => {
            button.addEventListener('click', function() {
                const employeeId = this.getAttribute('data-id');
                showEmployeeDetail(employeeId);
            });
        });

        // 编辑员工按钮点击
        const editButtons = document.querySelectorAll('.btn-edit');
        editButtons.forEach(button => {
            button.addEventListener('click', function() {
                const employeeId = this.getAttribute('data-id');
                showEditEmployeeForm(employeeId);
            });
        });

        // 删除员工按钮点击
        const deleteButtons = document.querySelectorAll('.btn-delete');
        deleteButtons.forEach(button => {
            button.addEventListener('click', function() {
                const employeeId = this.getAttribute('data-id');
                deleteEmployee(employeeId);
            });
        });
    }

    // 渲染分页控件
    function renderPagination() {
        const pagination = document.getElementById('pagination');
        console.log("currentPage is " + currentPage);
        console.log("totalPages is " + totalPages);

        if (totalPages <= 1) {
            pagination.innerHTML = '';
            return;
        }

        let html = '';

        // 上一页按钮
        if (currentPage > 1) {
            html += `
                    <li class="page-item">
                        <a class="page-link" href="#" data-page="${currentPage - 1}">上一页</a>
                    </li>
                `;
        }

        // 页码按钮
        for (let i = 1; i <= totalPages; i++) {
            html += `
                    <li class="page-item ${i === currentPage ? 'active' : ''}">
                        <a class="page-link" href="#" data-page="${i}">${i}</a>
                    </li>
                `;
        }

        // 下一页按钮
        if (currentPage < totalPages) {
            html += `
                    <li class="page-item">
                        <a class="page-link" href="#" data-page="${currentPage + 1}">下一页</a>
                    </li>
                `;
        }

        pagination.innerHTML = html;

        // 添加分页事件监听器
        const pageLinks = document.querySelectorAll('.page-link');
        pageLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                currentPage = parseInt(this.getAttribute('data-page'));
                loadEmployees();
            });
        });
    }

    // 加载部门选择框选项
    async function loadDepartmentsForSelect() {
        try {
            const response = await fetch(`${API_BASE_URL}/departments`);

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const departments = await response.json();

            // 更新添加员工表单的部门选择框
            const addDeptSelect = document.getElementById('empDept');
            addDeptSelect.innerHTML = '<option value="">请选择部门</option>' +
                departments.map(dept => `<option value="${dept.departmentName}">${dept.departmentName}</option>`).join('');

            // 更新编辑员工表单的部门选择框
            const editDeptSelect = document.getElementById('editEmpDept');
            editDeptSelect.innerHTML = departments.map(dept => `<option value="${dept.departmentName}">${dept.departmentName}</option>`).join('');

        } catch (error) {
            console.error('加载部门数据失败:', error);
            showError('加载部门数据失败，请稍后重试');
        }
    }

    // 加载部门页面数据
    async function loadDepartmentData() {
        try {
            // 加载部门卡片数据
            const response = await fetch(`${API_BASE_URL}/departments`);

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const departments = await response.json();
            renderDepartmentCards(departments);

            // 加载部门图表数据
            const chartResponse = await fetch(`${API_BASE_URL}/departments/charts/barchart`);

            if (!chartResponse.ok) {
                throw new Error(`HTTP error! status: ${chartResponse.status}`);
            }

            const chartData = await chartResponse.json();
            renderDepartmentChart(chartData);

        } catch (error) {
            console.error('加载图表失败:', error);
            showError('加载图表失败，请稍后重试');
        }
    }

    // 渲染部门卡片
    function renderDepartmentCards(departments) {
        const container = document.getElementById('departmentCards');

        container.innerHTML = departments.map(dept => `
    <div class="col-md-4 mb-4">
        <div class="card department-card h-100 border-0 shadow-sm hover-lift">
            <div class="card-header bg-gradient-primary text-white border-0 position-relative">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0 fw-semibold">
                        <i class="fas fa-building me-2"></i>${dept.departmentName}
                    </h5>
                    <span class="badge bg-white text-primary rounded-pill px-3">
                        <i class="fas fa-users me-1"></i>${dept.employeeCount || 0}
                    </span>
                </div>
                <div class="department-corner">
                    <i class="fas fa-briefcase"></i>
                </div>
            </div>

            <div class="card-body">
                <!-- 部门信息列表 -->
                <ul class="list-group list-group-flush">
                    <li class="list-group-item d-flex align-items-center px-0 py-3">
                        <div class="icon-circle bg-primary bg-opacity-10 text-primary rounded-circle d-flex align-items-center justify-content-center me-3"
                             style="width: 36px; height: 36px;">
                            <i class="fas fa-calendar-alt fa-sm"></i>
                        </div>
                        <div>
                            <small class="text-muted d-block">成立时间</small>
                            <span class="fw-semibold">${dept.createdTime ? dept.createdTime.replace('T', ' ').substring(0, 16) : '未记录'}</span>
                        </div>
                    </li>

                    <li class="list-group-item d-flex align-items-center px-0 py-3">
                        <div class="icon-circle bg-success bg-opacity-10 text-success rounded-circle d-flex align-items-center justify-content-center me-3"
                             style="width: 36px; height: 36px;">
                            <i class="fas fa-user-tie fa-sm"></i>
                        </div>
                        <div>
                            <small class="text-muted d-block">部门经理</small>
                            <span class="fw-semibold ${!dept.managerName ? 'text-warning' : ''}">
                                ${dept.managerName || '未设置'}
                            </span>
                        </div>
                    </li>

                    <li class="list-group-item d-flex align-items-center px-0 py-3">
                        <div class="icon-circle bg-info bg-opacity-10 text-info rounded-circle d-flex align-items-center justify-content-center me-3"
                             style="width: 36px; height: 36px;">
                            <i class="fas fa-users fa-sm"></i>
                        </div>
                        <div>
                            <small class="text-muted d-block">在职员工</small>
                            <div class="d-flex align-items-center">
                                <span class="fw-bold fs-5 me-2">${dept.employeeCount || 0}</span>
                                <span class="text-muted small">人</span>

                            </div>
                        </div>
                    </li>
                </ul>
            </div>

            <!--<div class="card-footer bg-transparent border-top-0">
                <div class="row g-2">
                    <div class="col-6">
                        <button class="btn btn-outline-primary btn-sm w-100 department-btn" onclick="viewDepartment(${dept.departmentId})">
                            <i class="fas fa-eye me-1"></i>查看详情
                        </button>
                    </div>
                    <div class="col-6">
                        <button class="btn btn-outline-secondary btn-sm w-100 department-btn" onclick="editDepartment(${dept.departmentId})">
                            <i class="fas fa-edit me-1"></i>编辑部门
                        </button>
                    </div>
                </div>
            </div>-->
        </div>
    </div>
`).join('');
    }

    // 显示员工详情
    async function showEmployeeDetail(employeeId) {
        try {
            const response = await fetch(`${API_BASE_URL}/employees/${employeeId}`);

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const employee = await response.json();

            // 填充模态框数据
            document.getElementById('detail-id').textContent = employee.id;
            document.getElementById('detail-name').textContent = employee.name;
            document.getElementById('detail-position').textContent = convertPosition(employee.position) || '未设置';
            document.getElementById('detail-dept').textContent = employee.department || '未设置';
            document.getElementById('detail-age').textContent = employee.age;
            document.getElementById('detail-gender').textContent = convertGender(employee.gender);
            document.getElementById('detail-joinDate').textContent = employee.join_date || '未设置';
            document.getElementById('detail-salary').textContent = employee.salary.toLocaleString() || '未设置';
            document.getElementById('detail-performance').textContent = employee.performance || '未设置';
            document.getElementById('detail-phone').textContent = employee.phone || '未设置';
            document.getElementById('detail-email').textContent = employee.email || '未设置';
            document.getElementById('detail-address').textContent = employee.address || '未设置';
            // 设置头像 - 关键修改部分
            const avatarElement = document.getElementById('detail-avatar');
            console.log(employee.avatar_url);
            if (employee.avatar_url) {
                // 如果后端返回了头像URL，使用该URL
                avatarElement.src = employee.avatar_url;
                // 设置alt属性为员工姓名
                avatarElement.alt = employee.name + '的头像';
            }

            // 显示模态框
            const detailModal = new bootstrap.Modal(document.getElementById('employeeDetailModal'));
            detailModal.show();

        } catch (error) {
            console.error('获取员工详情失败:', error);
            showError('获取员工详情失败，请稍后重试');
        }
    }

    // 显示编辑员工表单
    async function showEditEmployeeForm(employeeId) {
        try {
            const response = await fetch(`${API_BASE_URL}/employees/${employeeId}`);

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const employee = await response.json();

            // 填充编辑表单
            document.getElementById('editEmpId').value = employee.id;
            document.getElementById('editEmpName').value = employee.name;
            document.getElementById('editEmpAge').value = employee.age;
            document.getElementById('editEmpGender').value = convertGender(employee.gender);
            document.getElementById('editEmpDept').value = employee.department;
            document.getElementById('editEmpPosition').value = convertPosition(employee.position);
            document.getElementById('editEmpSalary').value = employee.salary;
            document.getElementById('editEmpPhone').value = employee.phone;
            document.getElementById('editEmpEmail').value = employee.email;
            document.getElementById('editEmpAddress').value = employee.address;
            document.getElementById('editEmpPerformance').value = employee.performance;
            document.getElementById('editEmpJoinDate').value = employee.join_date;

            // 显示编辑模态框
            const editModal = new bootstrap.Modal(document.getElementById('editEmployeeModal'));
            editModal.show();

        } catch (error) {
            console.error('获取员工信息失败:', error);
            showError('获取员工信息失败，请稍后重试');
        }
    }

    // 添加新员工
    async function addEmployee() {
        const saveButton = document.getElementById('saveEmployee');

        try {
            saveButton.disabled = true;

            const formData = {
                name: document.getElementById('empName').value,
                age: parseInt(document.getElementById('empAge').value),
                gender: document.getElementById('empGender').value,
                department: document.getElementById('empDept').value,
                position: document.getElementById('empPosition').value,
                salary: parseFloat(document.getElementById('empSalary').value),
                phone: document.getElementById('empPhone').value,
                email: document.getElementById('empEmail').value,
                address: document.getElementById('empAddress').value,
                join_date: document.getElementById('empJoinDate').value || new Date().toISOString().split('T')[0],
                avatar_url: 'https://c-ssl.dtstatic.com/uploads/blog/202401/15/6zSMPWqdFqYgeXv.thumb.300_300_c.jpg'
            };

            const response = await fetch(`${API_BASE_URL}/employees`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            // 显示成功消息
            showSuccess('员工添加成功');

            // 关闭模态框
            const addModal = bootstrap.Modal.getInstance(document.getElementById('addEmployeeModal'));
            addModal.hide();

            // 重置表单
            document.getElementById('addEmployeeForm').reset();

            // 刷新员工列表
            loadEmployees();

        } catch (error) {
            console.error('添加员工失败:', error);
            showError('添加员工失败，请稍后重试');
        } finally {
            // 恢复按钮状态
            //spinner.style.display = 'none';
            //buttonText.textContent = '保存';
            saveButton.disabled = false;
        }
    }

    // 更新员工信息
    async function updateEmployee() {
        const updateButton = document.getElementById('updateEmployee');
        try {
            updateButton.disabled = true;

            const employeeId = document.getElementById('editEmpId').value;

            const formData = {
                id: document.getElementById('editEmpId').value,
                name: document.getElementById('editEmpName').value,
                age: parseInt(document.getElementById('editEmpAge').value),
                gender: document.getElementById('editEmpGender').value,
                department: document.getElementById('editEmpDept').value,
                position: document.getElementById('editEmpPosition').value,
                performance: document.getElementById('editEmpPerformance').value || 'D',
                salary: parseFloat(document.getElementById('editEmpSalary').value),
                phone: document.getElementById('editEmpPhone').value,
                email: document.getElementById('editEmpEmail').value,
                address: document.getElementById('editEmpAddress').value,
                join_date: document.getElementById('editEmpJoinDate').value || new Date().toISOString().split('T')[0],
                avatar_url: document.getElementById('editEmpAvatarUrl').value || ''
            };

            const response = await fetch(`${API_BASE_URL}/employees/${employeeId}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            // 显示成功消息
            showSuccess('员工信息更新成功');

            // 关闭模态框
            const editModal = bootstrap.Modal.getInstance(document.getElementById('editEmployeeModal'));
            editModal.hide();

            // 刷新员工列表
            loadEmployees();

        } catch (error) {
            console.error('更新员工信息失败:', error);
            showError('更新员工信息失败，请稍后重试');
        } finally {
            updateButton.disabled = false;
        }
    }

    // 删除员工
    async function deleteEmployee(employeeId) {
        if (!confirm(`确定要删除员工 ${employeeId} 吗？此操作不可撤销。`)) {
            return;
        }

        try {
            const response = await fetch(`${API_BASE_URL}/employees/${employeeId}`, {
                method: 'DELETE'
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            // 显示成功消息
            showSuccess('员工删除成功');

            // 刷新员工列表
            loadEmployees();

        } catch (error) {
            console.error('删除员工失败:', error);
            showError('删除员工失败，请稍后重试');
        }
    }

    // 绘制部门图表
    function renderDepartmentChart(chartData) {
        const ctx = document.getElementById('departmentChart').getContext('2d');

        // 如果已存在图表实例，先销毁
        if (window.departmentChartInstance) {
            window.departmentChartInstance.destroy();
        }

        // 准备图表数据
        const labels = chartData.map(item => item.department);
        const data = chartData.map(item => item.count);

        window.departmentChartInstance = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: '员工数量',
                    data: data,
                    backgroundColor: [
                        'rgba(60, 141, 188, 0.7)',
                        'rgba(0, 166, 90, 0.7)',
                        'rgba(243, 156, 18, 0.7)',
                        'rgba(221, 75, 57, 0.7)',
                        'rgba(96, 92, 168, 0.7)'
                    ],
                    borderColor: [
                        'rgba(60, 141, 188, 1)',
                        'rgba(0, 166, 90, 1)',
                        'rgba(243, 156, 18, 1)',
                        'rgba(221, 75, 57, 1)',
                        'rgba(96, 92, 168, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            stepSize: 1
                        }
                    }
                }
            }
        });
    }

    // 显示加载状态
    function showLoading(selector) {
        const element = document.querySelector(selector);
        if (element) {
            element.innerHTML = `
                    <tr>
                        <td colspan="7" class="text-center">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">加载中...</span>
                            </div>
                        </td>
                    </tr>
                `;
        }
    }

    // 显示成功消息
    function showSuccess(message) {
        showToast(message, 'success');
    }

    // 显示错误消息
    function showError(message) {
        showToast(message, 'danger');
    }

    // 显示Toast消息
    function showToast(message, type = 'info') {
        const toastContainer = document.querySelector('.toast-container');
        const toastId = 'toast-' + Date.now();

        const toast = document.createElement('div');
        toast.className = `toast align-items-center text-white bg-${type} border-0`;
        toast.setAttribute('role', 'alert');
        toast.setAttribute('aria-live', 'assertive');
        toast.setAttribute('aria-atomic', 'true');
        toast.id = toastId;

        toast.innerHTML = `
                <div class="d-flex">
                    <div class="toast-body">
                        ${message}
                    </div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
            `;

        toastContainer.appendChild(toast);

        const bsToast = new bootstrap.Toast(toast, {
            autohide: true,
            delay: 3000
        });

        bsToast.show();

        // 自动移除toast元素
        toast.addEventListener('hidden.bs.toast', function() {
            toast.remove();
        });
    }

    function convertGender(gender) {
        switch(gender) {
            case "MALE":
                return "男";
            case "FEMALE":
                return "女";
            case "OTHER":
                return "未知";
            default:
                return "未知";
        }
    }

    function convertPosition(position) {
        switch(position) {
            case "STAFF":
                return "普通职工";
            case "DIRECTOR":
                return "负责人";
            case "MANAGER":
                return "经理";
            case "SENIOR_MANAGER":
                return "高级经理";
            case "INTERN":
                return "实习生";
            default:
                return "未知";
        }
    }
</script>
</body>
</html>